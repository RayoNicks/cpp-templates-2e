
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Appendix B Value Categories Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="2022-03-02-appC-overload-resolution.html" />
    
    
    <link rel="prev" href="2022-03-09-ch28-debugging-templates.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="2021-12-15-ch1-function-templates.html">
            
                <a href="2021-12-15-ch1-function-templates.html">
            
                    
                    Chapter 1 Funtion Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="2021-12-20-ch2-class-templates.html">
            
                <a href="2021-12-20-ch2-class-templates.html">
            
                    
                    Chapter 2 Class Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="2021-12-20-ch3-nontype-template-parameters.html">
            
                <a href="2021-12-20-ch3-nontype-template-parameters.html">
            
                    
                    Chapter 3 Nontype Template Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="2021-12-20-ch4-variadic-templates.html">
            
                <a href="2021-12-20-ch4-variadic-templates.html">
            
                    
                    Chapter 4 Variadic Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="2021-12-30-ch5-tricky-basics.html">
            
                <a href="2021-12-30-ch5-tricky-basics.html">
            
                    
                    Chapter 5 Tricky Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="2022-01-04-ch6-move-semantics-and-enable-if.html">
            
                <a href="2022-01-04-ch6-move-semantics-and-enable-if.html">
            
                    
                    Chapter 6 Move Semantics and enable_if<>
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="2022-01-05-ch7-by-value-or-by-reference.html">
            
                <a href="2022-01-05-ch7-by-value-or-by-reference.html">
            
                    
                    Chapter 7 By Value or by Reference?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="2022-01-06-ch8-compile-time-programming.html">
            
                <a href="2022-01-06-ch8-compile-time-programming.html">
            
                    
                    Chapter 8 Compile-Time Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="2022-01-06-ch9-using-templates-in-practice.html">
            
                <a href="2022-01-06-ch9-using-templates-in-practice.html">
            
                    
                    Chapter 9 Using Templates in Practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="2022-01-07-ch10-basic-template-terminology.html">
            
                <a href="2022-01-07-ch10-basic-template-terminology.html">
            
                    
                    Chapter 10 Basic Template Terminology
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="2022-01-08-ch11-generic-libraries.html">
            
                <a href="2022-01-08-ch11-generic-libraries.html">
            
                    
                    Chapter 11 Generic Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="2022-01-12-ch12-fundamentals-in-depth.html">
            
                <a href="2022-01-12-ch12-fundamentals-in-depth.html">
            
                    
                    Chapter 12 Fundamentals in Depth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="2022-01-27-ch13-names-in-templates.html">
            
                <a href="2022-01-27-ch13-names-in-templates.html">
            
                    
                    Chapter 13 Names in Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="2022-02-07-ch14-instantiation.html">
            
                <a href="2022-02-07-ch14-instantiation.html">
            
                    
                    Chapter 14 Instantiation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="2022-02-15-ch15-template-argument-deduction.html">
            
                <a href="2022-02-15-ch15-template-argument-deduction.html">
            
                    
                    Chapter 15 Template Argument Deduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="2022-02-17-ch16-specialization-and-overloading.html">
            
                <a href="2022-02-17-ch16-specialization-and-overloading.html">
            
                    
                    Chapter 16 Specialization and Overloading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="2022-02-22-ch17-future-directions.html">
            
                <a href="2022-02-22-ch17-future-directions.html">
            
                    
                    Chapter 17 Future Directions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="2022-02-23-ch18-the-polymorphic-power-of-templates.html">
            
                <a href="2022-02-23-ch18-the-polymorphic-power-of-templates.html">
            
                    
                    Chapter 18 The Polymorphic Power of Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="2022-03-01-ch19-implementing-traits.html">
            
                <a href="2022-03-01-ch19-implementing-traits.html">
            
                    
                    Chapter 19 Implementing Traits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="2022-03-02-ch20-overloading-on-type-properties.html">
            
                <a href="2022-03-02-ch20-overloading-on-type-properties.html">
            
                    
                    Chapter 20 Overloading on Type Properties
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="2022-03-03-ch21-templates-and-inheritance.html">
            
                <a href="2022-03-03-ch21-templates-and-inheritance.html">
            
                    
                    Chapter 21 Templates and Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="2022-03-05-ch22-bridging-static-and-dynamic-polymorphism.html">
            
                <a href="2022-03-05-ch22-bridging-static-and-dynamic-polymorphism.html">
            
                    
                    Chapter 22 Bridging Static and Dynamic Polymorphism
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="2022-03-05-ch23-metaprogramming.html">
            
                <a href="2022-03-05-ch23-metaprogramming.html">
            
                    
                    Chapter 23 Metaprogramming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="2022-03-06-ch24-typelists.html">
            
                <a href="2022-03-06-ch24-typelists.html">
            
                    
                    Chapter 24 Typelists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26" data-path="2022-03-07-ch25-tuples.html">
            
                <a href="2022-03-07-ch25-tuples.html">
            
                    
                    Chapter 25 Tuples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27" data-path="2022-03-08-ch26-discriminated-unions.html">
            
                <a href="2022-03-08-ch26-discriminated-unions.html">
            
                    
                    Chapter 26 Discriminated Unions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28" data-path="2022-03-09-ch27-expression-templates.html">
            
                <a href="2022-03-09-ch27-expression-templates.html">
            
                    
                    Chapter 27 Expression Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29" data-path="2022-03-09-ch28-debugging-templates.html">
            
                <a href="2022-03-09-ch28-debugging-templates.html">
            
                    
                    Chapter 28 Debugging Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.30" data-path="2022-01-05-appB-value-categories.html">
            
                <a href="2022-01-05-appB-value-categories.html">
            
                    
                    Appendix B Value Categories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.31" data-path="2022-03-02-appC-overload-resolution.html">
            
                <a href="2022-03-02-appC-overload-resolution.html">
            
                    
                    Appendix C Overload Resolution
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Appendix B Value Categories</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="b-&#x503C;&#x7C7B;&#x578B;">B &#x503C;&#x7C7B;&#x578B;</h1>
<h2 id="b1-&#x4F20;&#x7EDF;&#x610F;&#x4E49;&#x4E0B;&#x7684;&#x5DE6;&#x503C;&#x548C;&#x53F3;&#x503C;">B.1 &#x4F20;&#x7EDF;&#x610F;&#x4E49;&#x4E0B;&#x7684;&#x5DE6;&#x503C;&#x548C;&#x53F3;&#x503C;</h2>
<p>&#x5DE6;&#x503C;&#xFF08;lvalue&#xFF09;&#x662F;&#x5728;&#x5185;&#x5B58;&#x6216;&#x8005;&#x5BC4;&#x5B58;&#x5668;&#x4E2D;&#x7684;&#x503C;&#x3002;&#x8D77;&#x521D;&#x8FD9;&#x79CD;&#x8BF4;&#x6CD5;&#x6765;&#x6E90;&#x4E8E;C&#x8BED;&#x8A00;&#x4E2D;&#x5728;<code>=</code>&#x5DE6;&#x8FB9;&#x7684;&#x503C;&#xFF0C;l&#x8868;&#x793A;left-hand side&#xFF0C;&#x76F8;&#x5E94;&#x7684;&#xFF0C;&#x53F3;&#x503C;&#xFF08;rvalue&#xFF09;&#x6765;&#x6E90;&#x4E8E;&#x5728;<code>=</code>&#x53F3;&#x8FB9;&#x7684;&#x503C;&#xFF0C;r&#x8868;&#x793A;right-hand side&#x3002;&#x4E0D;&#x8FC7;&#x540E;&#x6765;&#x5728;C&#x8BED;&#x8A00;&#x4E2D;&#x67D0;&#x4E9B;&#x88AB;<code>const</code>&#x4FEE;&#x9970;&#x7684;&#x53D8;&#x91CF;&#x4E5F;&#x53EF;&#x4EE5;&#x5B58;&#x5728;&#x4E8E;&#x5185;&#x5B58;&#x6216;&#x8005;&#x5BC4;&#x5B58;&#x5668;&#x4E2D;&#xFF0C;&#x4F46;&#x5374;&#x662F;&#x4E0D;&#x53EF;&#x4FEE;&#x6539;&#x7684;&#x3002;C++&#x6269;&#x5C55;&#x4E86;&#x53F3;&#x503C;&#x7684;&#x542B;&#x4E49;&#xFF0C;&#x5BF9;&#x4E8E;&#x7C7B;&#x7684;&#x53F3;&#x503C;&#xFF0C;&#x5176;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x5728;<code>=</code>&#x5DE6;&#x8FB9;&#x7684;&#xFF0C;&#x6B64;&#x65F6;&#x7684;<code>=</code>&#x5E94;&#x8BE5;&#x7406;&#x89E3;&#x4E3A;&#x91CD;&#x8F7D;&#x7684;<code>=</code>&#x8FD0;&#x7B97;&#x7B26;&#x3002;</p>
<p>&#x6216;&#x8BB8;&#x5C06;&#x5DE6;&#x503C;&#x4E2D;&#x7684;l&#x7406;&#x89E3;&#x4E3A;&#x5C40;&#x90E8;&#x5316;&#x53D8;&#x91CF;&#xFF08;localizable value&#xFF09;&#x66F4;&#x5408;&#x9002;&#xFF0C;&#x8FD9;&#x6837;&#x5DE6;&#x503C;&#x7684;&#x542B;&#x4E49;&#x5C31;&#x66F4;&#x52A0;&#x5E7F;&#x6CDB;&#x4E86;&#xFF1A;</p>
<ul>
<li>&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x7684;&#x53D8;&#x91CF;</li>
<li>&#x6307;&#x9488;&#x89E3;&#x5F15;&#x7528;&#x540E;&#x7684;&#x5BF9;&#x8C61;</li>
<li>&#x6570;&#x636E;&#x6210;&#x5458;</li>
<li>&#x8FD4;&#x56DE;&#x5DE6;&#x503C;&#x5F15;&#x7528;&#x7684;&#x51FD;&#x6570;</li>
<li>&#x5B57;&#x7B26;&#x4E32;&#x5B57;&#x9762;&#x503C;</li>
</ul>
<p>&#x53F3;&#x503C;&#x5C31;&#x662F;&#x7EAF;&#x7CB9;&#x6570;&#x5B66;&#x610F;&#x4E49;&#x4E0A;&#x7684;&#x3001;&#x4E0D;&#x4F1A;&#x88AB;&#x5B58;&#x50A8;&#x7684;&#x3001;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E00;&#x6B21;&#x7684;&#x503C;&#x3002;&#x603B;&#x4E4B;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4E34;&#x65F6;&#x91CF;&#x90FD;&#x662F;&#x53F3;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x5F15;&#x7528;&#x53F3;&#x503C;&#x7684;&#x5F15;&#x7528;&#x4E0D;&#x662F;&#x53F3;&#x503C;&#x3002;&#x539F;&#x6587;&#xFF1A;</p>
<blockquote>
<p>That is, all temporaries are rvalues. (That doesn&#x2019;t apply to named references that refer to them, though.)</p>
</blockquote>
<h3 id="b11-&#x5DE6;&#x503C;&#x5230;&#x53F3;&#x503C;&#x7684;&#x8F6C;&#x6362;">B.1.1 &#x5DE6;&#x503C;&#x5230;&#x53F3;&#x503C;&#x7684;&#x8F6C;&#x6362;</h3>
<p>&#x5BF9;&#x4E8E;&#x4E24;&#x4E2A;&#x5DE6;&#x503C;<code>x</code>&#x548C;<code>y</code>&#xFF0C;&#x5728;&#x8868;&#x8FBE;&#x5F0F;<code>x = y</code>&#x4E2D;&#xFF0C;<code>y</code>&#x53D1;&#x751F;&#x4E86;&#x7684;&#x5DE6;&#x503C;&#x5230;&#x53F3;&#x503C;&#x7684;&#x9690;&#x5F0F;&#x8F6C;&#x6362;&#xFF08;lvalue-to-rvalue conversion&#xFF09;&#xFF0C;&#x8FD9;&#x79CD;&#x8F6C;&#x6362;&#x4FDD;&#x8BC1;&#x4E86;&#x5DE6;&#x503C;&#x53EF;&#x4EE5;&#x5F53;&#x4F5C;&#x53F3;&#x503C;&#x4F7F;&#x7528;&#xFF0C;&#x4EE5;&#x53CA;&#x673A;&#x5668;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x6761;&#x88C5;&#x8F7D;&#x6307;&#x4EE4;&#x3002;</p>
<h2 id="b2-c11&#x540E;&#x7684;&#x503C;&#x7C7B;&#x578B;">B.2 C++11&#x540E;&#x7684;&#x503C;&#x7C7B;&#x578B;</h2>
<p>&#x4E0B;&#x9762;&#x662F;C++11&#x6269;&#x5C55;&#x540E;&#x7684;&#x503C;&#x7C7B;&#x578B;&#xFF1A;</p>
<ul>
<li>glvalue&#xFF0C;&#x5168;&#x79F0;generalized lvalue&#xFF0C;&#x4F1A;&#x88AB;&#x5B58;&#x50A8;&#x7684;&#x503C;&#xFF0C;&#x5305;&#x62EC;lvalue&#x548C;xvalue</li>
<li>prvalue&#xFF0C;&#x5168;&#x79F0;pure rvalue&#xFF0C;&#x6C42;&#x503C;&#x7ED3;&#x679C;&#x88AB;&#x7528;&#x6765;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x6216;&#x8005;&#x662F;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x6C42;&#x503C;&#x7ED3;&#x679C;</li>
<li>xvalue&#xFF0C;&#x5168;&#x79F0;eXpiring value&#xFF0C;&#x53EF;&#x4EE5;&#x88AB;&#x91CD;&#x7528;&#x7684;&#x503C;&#xFF0C;&#x5177;&#x6709;&#x56FA;&#x5B9A;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x59D1;&#x4E14;&#x79F0;&#x4E3A;&#x5230;&#x671F;&#x503C;</li>
<li>lvalue&#xFF0C;glvalue&#x4E2D;&#x975E;xvalue&#x7684;&#x90E8;&#x5206;</li>
<li>rvalue&#xFF0C;&#x5305;&#x62EC;xvalue&#x548C;prvalue</li>
</ul>
<p>&#x5DE6;&#x503C;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<ul>
<li>&#x53D8;&#x91CF;&#x548C;&#x51FD;&#x6570;&#x53D8;&#x91CF;</li>
<li>&#x6307;&#x9488;&#x89E3;&#x5F15;&#x7528;&#x7684;&#x7ED3;&#x679C;</li>
<li>&#x5B57;&#x7B26;&#x4E32;&#x5B57;&#x9762;&#x503C;</li>
<li>&#x8FD4;&#x56DE;&#x5DE6;&#x503C;&#x5F15;&#x7528;&#x7684;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;</li>
</ul>
<p>&#x53F3;&#x503C;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<ul>
<li>&#x5927;&#x591A;&#x6570;&#x5B57;&#x9762;&#x503C;</li>
<li>&#x53D6;&#x5730;&#x5740;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x7ED3;&#x679C;</li>
<li>&#x5185;&#x7F6E;&#x7B97;&#x672F;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x7ED3;&#x679C;</li>
<li>&#x4E0D;&#x8FD4;&#x56DE;&#x5F15;&#x7528;&#x7684;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;</li>
<li>lambda&#x8868;&#x8FBE;&#x5F0F;</li>
</ul>
<p>&#x5230;&#x671F;&#x503C;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<ul>
<li>&#x8FD4;&#x56DE;&#x53F3;&#x503C;&#x5F15;&#x7528;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<code>std::move</code></li>
<li>&#x5BF9;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x7684;&#x53F3;&#x503C;&#x5F15;&#x7528;&#x7684;&#x5F3A;&#x5236;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x7684;&#x7ED3;&#x679C;</li>
</ul>
<h3 id="b21-&#x4E34;&#x65F6;&#x5B9E;&#x4F53;&#x5316;&#xFF08;temporary-materialization&#xFF09;">B.2.1 &#x4E34;&#x65F6;&#x5B9E;&#x4F53;&#x5316;&#xFF08;Temporary Materialization&#xFF09;</h3>
<p>&#x4E34;&#x65F6;&#x5B9E;&#x4F53;&#x5316;&#x662F;&#x5DE6;&#x503C;&#x5230;&#x53F3;&#x503C;&#x8F6C;&#x6362;&#x7684;&#x9006;&#x8F6C;&#x6362;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;prvalue&#x8F6C;&#x6362;&#x4E3A;xvalue&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7528;rvalue&#x4E34;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;xvalue&#xFF0C;&#x4E00;&#x822C;&#x53D1;&#x751F;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x60C5;&#x51B5;&#x4E2D;&#xFF1A;</p>
<ul>
<li>&#x5F15;&#x7528;&#x7ED1;&#x5B9A;&#x5230;&#x7EAF;&#x53F3;&#x503C;</li>
<li>&#x8BBF;&#x95EE;&#x7C7B;&#x7684;&#x7EAF;&#x53F3;&#x503C;&#x6210;&#x5458;</li>
<li>&#x901A;&#x8FC7;&#x4E0B;&#x6807;&#x8BBF;&#x95EE;&#x7684;&#x7EAF;&#x53F3;&#x503C;&#x6570;&#x7EC4;&#xFF08;An array prvalue is subscripted&#xFF09;</li>
<li>&#x7EAF;&#x53F3;&#x503C;&#x6570;&#x7EC4;&#x8F6C;&#x6362;&#x4E3A;&#x6307;&#x9488;</li>
<li>&#x653E;&#x5165;<code>std::initializer_list</code>&#x4E2D;&#x7684;&#x7EAF;&#x53F3;&#x503C;</li>
<li>&#x4F7F;&#x7528;<code>sizeof</code>&#x548C;<code>typeid</code>&#x5BF9;&#x7EAF;&#x53F3;&#x503C;&#x8FDB;&#x884C;&#x6C42;&#x503C;</li>
<li>&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6700;&#x7EC8;&#x6C42;&#x503C;&#x7ED3;&#x679C;&#xFF0C;&#x6216;&#x8005;&#x8868;&#x8FBE;&#x5F0F;&#x88AB;&#x8F6C;&#x6362;&#x4E3A;<code>void</code></li>
</ul>
<p>&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x6709;&#x8DA3;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> N {
    <span class="hljs-keyword">public</span>:
        N();
        N(N <span class="hljs-keyword">const</span>&amp;) = <span class="hljs-keyword">delete</span>;   <span class="hljs-comment">// this class is neither copyable ...</span>
        N(N&amp;&amp;) = <span class="hljs-keyword">delete</span>;        <span class="hljs-comment">// ... nor movable</span>
};

<span class="hljs-function">N <span class="hljs-title">make_N</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> N{};     <span class="hljs-comment">// Always creates a conceptual temporary prior to C++17.</span>
}                   <span class="hljs-comment">// In C++17, no temporary is created at this point.</span>

<span class="hljs-keyword">auto</span> n = make_N();  <span class="hljs-comment">// ERROR prior to C++17 because the prvalue needs a</span>
                    <span class="hljs-comment">// conceptual copy. OK since C++17, because n is</span>
                    <span class="hljs-comment">// initialized directly from the prvalue.</span>
</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;<code>n</code>&#x4E2D;&#x6784;&#x9020;&#x5BF9;&#x8C61;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5728;C++17&#x4E4B;&#x524D;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4F18;&#x5316;&#x63AA;&#x65BD;&#xFF0C;&#x8BED;&#x8A00;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x4FDD;&#x8BC1;&#xFF0C;&#x5E76;&#x4E14;&#x56E0;&#x4E3A;<code>N{}</code>&#x662F;&#x4E00;&#x4E2A;&#x53F3;&#x503C;&#xFF0C;&#x5728;&#x8981;&#x8C03;&#x7528;&#x7C7B;<code>N</code>&#x7684;&#x79FB;&#x52A8;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6765;&#x521D;&#x59CB;&#x5316;<code>n</code>&#x65F6;&#x8FD8;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x79FB;&#x52A8;&#x6784;&#x9020;&#x51FD;&#x6570;&#x88AB;&#x5220;&#x9664;&#x4E86;&#x3002;&#x539F;&#x6587;&#xFF1A;</p>
<blockquote>
<p>Prior to C++17, the prvalue Nfg produced a temporary of type N, but compilers were allowed to elide copies and moves of that temporary (which they always did, in practice). In this case, that means that the temporary result of calling make_N() can be constructed directly in the storage of n; no copy or move operation is needed. Unfortunately, pre-C++17 compilers still have to check that a copy or move operation could be made, and in this example that is not possible because the copy constructor of N is deleted (and no move constructor is generated). Hence, C++11 and C++14 compilers must issue an error for this example.
With C++17 the prvalue N itself does not produce a temporary. Instead, it initializes an object determined by the context: In our example, that object is the one denoted by n. No copy or move operation is ever considered (this is not an optimization, but a language guarantee) and therefore the code is valid C++17.</p>
</blockquote>
<p>&#x6700;&#x540E;&#x662F;&#x4E00;&#x4E2A;&#x503C;&#x7C7B;&#x578B;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> X {
};

X v;
X <span class="hljs-keyword">const</span> c;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">(X <span class="hljs-keyword">const</span>&amp;)</span></span>;   <span class="hljs-comment">// accepts an expression of any value category</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">(X&amp;&amp;)</span></span>;        <span class="hljs-comment">// accepts prvalues and xvalues only but is a better match</span>
                    <span class="hljs-comment">// for those than the previous declaration</span>

f(v);               <span class="hljs-comment">// passes a modifiable lvalue to the first f()</span>
f(c);               <span class="hljs-comment">// passes a nonmodifiable lvalue to the first f()</span>
f(X());             <span class="hljs-comment">// passes a prvalue (since C++17 materialized as xvalue) to the 2nd f()</span>
f(<span class="hljs-built_in">std</span>::move(v));    <span class="hljs-comment">// passes an xvalue to the second f()</span>
</code></pre>
<h2 id="b3-&#x901A;&#x8FC7;decltype&#x8BC6;&#x522B;&#x503C;&#x7C7B;&#x578B;">B.3 &#x901A;&#x8FC7;decltype&#x8BC6;&#x522B;&#x503C;&#x7C7B;&#x578B;</h2>
<p>&#x53CC;&#x62EC;&#x53F7;&#x7248;&#x672C;&#x7684;<code>decltype((x))</code>&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;<code>x</code>&#x4E3A;&#x7EAF;&#x53F3;&#x503C;&#xFF0C;&#x5219;&#x4E3A;<code>type</code></li>
<li>&#x5982;&#x679C;<code>x</code>&#x4E3A;&#x5DE6;&#x503C;&#xFF0C;&#x5219;&#x4E3A;<code>type&amp;</code></li>
<li>&#x5982;&#x679C;<code>x</code>&#x4E3A;xvalue&#xFF0C;&#x5219;&#x4E3A;<code>type&amp;&amp;</code></li>
</ul>
<h2 id="b4-&#x5F15;&#x7528;&#x7C7B;&#x578B;">B.4 &#x5F15;&#x7528;&#x7C7B;&#x578B;</h2>
<pre><code class="lang-cpp"><span class="hljs-function"><span class="hljs-keyword">int</span>&amp; <span class="hljs-title">lvalue</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span>&amp;&amp; <span class="hljs-title">xvalue</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">prvalue</span><span class="hljs-params">()</span></span>;

<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">decltype</span>(lvalue()), <span class="hljs-keyword">int</span>&amp;&gt;    <span class="hljs-comment">// yields true because result is lvalue</span>
<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">decltype</span>(xvalue()), <span class="hljs-keyword">int</span>&amp;&amp;&gt;   <span class="hljs-comment">// yields true because result is xvalue</span>
<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">decltype</span>(prvalue()), <span class="hljs-keyword">int</span>&gt;    <span class="hljs-comment">// yields true because result is prvalue</span>

<span class="hljs-keyword">int</span>&amp; lref1 = lvalue();      <span class="hljs-comment">// OK: lvalue reference can bind to an lvalue</span>
<span class="hljs-keyword">int</span>&amp; lref3 = prvalue();     <span class="hljs-comment">// ERROR: lvalue reference cannot bind to a prvalue</span>
<span class="hljs-keyword">int</span>&amp; lref2 = xvalue();      <span class="hljs-comment">// ERROR: lvalue reference cannot bind to an xvalue</span>

<span class="hljs-keyword">int</span>&amp;&amp; rref1 = lvalue();     <span class="hljs-comment">// ERROR: rvalue reference cannot bind to an lvalue</span>
<span class="hljs-keyword">int</span>&amp;&amp; rref2 = prvalue();    <span class="hljs-comment">// OK: rvalue reference can bind to a prvalue</span>
<span class="hljs-keyword">int</span>&amp;&amp; rref3 = xvalue();     <span class="hljs-comment">// OK: rvalue reference can bind to an xrvalue</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="2022-03-09-ch28-debugging-templates.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 28 Debugging Templates">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="2022-03-02-appC-overload-resolution.html" class="navigation navigation-next " aria-label="Next page: Appendix C Overload Resolution">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Appendix B Value Categories","level":"1.30","depth":1,"next":{"title":"Appendix C Overload Resolution","level":"1.31","depth":1,"path":"2022-03-02-appC-overload-resolution.md","ref":"2022-03-02-appC-overload-resolution.md","articles":[]},"previous":{"title":"Chapter 28 Debugging Templates","level":"1.29","depth":1,"path":"2022-03-09-ch28-debugging-templates.md","ref":"2022-03-09-ch28-debugging-templates.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"2022-01-05-appB-value-categories.md","mtime":"2022-11-13T05:00:16.175Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-11-13T05:01:04.198Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

