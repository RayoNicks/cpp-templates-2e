
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chapter 4 Variadic Templates Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="2021-12-30-ch5-tricky-basics.html" />
    
    
    <link rel="prev" href="2021-12-20-ch3-nontype-template-parameters.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="2021-12-15-ch1-function-templates.html">
            
                <a href="2021-12-15-ch1-function-templates.html">
            
                    
                    Chapter 1 Funtion Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="2021-12-20-ch2-class-templates.html">
            
                <a href="2021-12-20-ch2-class-templates.html">
            
                    
                    Chapter 2 Class Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="2021-12-20-ch3-nontype-template-parameters.html">
            
                <a href="2021-12-20-ch3-nontype-template-parameters.html">
            
                    
                    Chapter 3 Nontype Template Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="2021-12-20-ch4-variadic-templates.html">
            
                <a href="2021-12-20-ch4-variadic-templates.html">
            
                    
                    Chapter 4 Variadic Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="2021-12-30-ch5-tricky-basics.html">
            
                <a href="2021-12-30-ch5-tricky-basics.html">
            
                    
                    Chapter 5 Tricky Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="2022-01-04-ch6-move-semantics-and-enable-if.html">
            
                <a href="2022-01-04-ch6-move-semantics-and-enable-if.html">
            
                    
                    Chapter 6 Move Semantics and enable_if<>
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="2022-01-05-ch7-by-value-or-by-reference.html">
            
                <a href="2022-01-05-ch7-by-value-or-by-reference.html">
            
                    
                    Chapter 7 By Value or by Reference?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="2022-01-06-ch8-compile-time-programming.html">
            
                <a href="2022-01-06-ch8-compile-time-programming.html">
            
                    
                    Chapter 8 Compile-Time Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="2022-01-06-ch9-using-templates-in-practice.html">
            
                <a href="2022-01-06-ch9-using-templates-in-practice.html">
            
                    
                    Chapter 9 Using Templates in Practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="2022-01-07-ch10-basic-template-terminology.html">
            
                <a href="2022-01-07-ch10-basic-template-terminology.html">
            
                    
                    Chapter 10 Basic Template Terminology
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="2022-01-08-ch11-generic-libraries.html">
            
                <a href="2022-01-08-ch11-generic-libraries.html">
            
                    
                    Chapter 11 Generic Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="2022-01-12-ch12-fundamentals-in-depth.html">
            
                <a href="2022-01-12-ch12-fundamentals-in-depth.html">
            
                    
                    Chapter 12 Fundamentals in Depth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="2022-01-27-ch13-names-in-templates.html">
            
                <a href="2022-01-27-ch13-names-in-templates.html">
            
                    
                    Chapter 13 Names in Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="2022-02-07-ch14-instantiation.html">
            
                <a href="2022-02-07-ch14-instantiation.html">
            
                    
                    Chapter 14 Instantiation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="2022-02-15-ch15-template-argument-deduction.html">
            
                <a href="2022-02-15-ch15-template-argument-deduction.html">
            
                    
                    Chapter 15 Template Argument Deduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="2022-02-17-ch16-specialization-and-overloading.html">
            
                <a href="2022-02-17-ch16-specialization-and-overloading.html">
            
                    
                    Chapter 16 Specialization and Overloading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="2022-02-22-ch17-future-directions.html">
            
                <a href="2022-02-22-ch17-future-directions.html">
            
                    
                    Chapter 17 Future Directions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="2022-02-23-ch18-the-polymorphic-power-of-templates.html">
            
                <a href="2022-02-23-ch18-the-polymorphic-power-of-templates.html">
            
                    
                    Chapter 18 The Polymorphic Power of Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="2022-03-01-ch19-implementing-traits.html">
            
                <a href="2022-03-01-ch19-implementing-traits.html">
            
                    
                    Chapter 19 Implementing Traits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="2022-03-02-ch20-overloading-on-type-properties.html">
            
                <a href="2022-03-02-ch20-overloading-on-type-properties.html">
            
                    
                    Chapter 20 Overloading on Type Properties
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="2022-03-03-ch21-templates-and-inheritance.html">
            
                <a href="2022-03-03-ch21-templates-and-inheritance.html">
            
                    
                    Chapter 21 Templates and Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="2022-03-05-ch22-bridging-static-and-dynamic-polymorphism.html">
            
                <a href="2022-03-05-ch22-bridging-static-and-dynamic-polymorphism.html">
            
                    
                    Chapter 22 Bridging Static and Dynamic Polymorphism
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="2022-03-05-ch23-metaprogramming.html">
            
                <a href="2022-03-05-ch23-metaprogramming.html">
            
                    
                    Chapter 23 Metaprogramming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="2022-03-06-ch24-typelists.html">
            
                <a href="2022-03-06-ch24-typelists.html">
            
                    
                    Chapter 24 Typelists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26" data-path="2022-03-07-ch25-tuples.html">
            
                <a href="2022-03-07-ch25-tuples.html">
            
                    
                    Chapter 25 Tuples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27" data-path="2022-03-08-ch26-discriminated-unions.html">
            
                <a href="2022-03-08-ch26-discriminated-unions.html">
            
                    
                    Chapter 26 Discriminated Unions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28" data-path="2022-03-09-ch27-expression-templates.html">
            
                <a href="2022-03-09-ch27-expression-templates.html">
            
                    
                    Chapter 27 Expression Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29" data-path="2022-03-09-ch28-debugging-templates.html">
            
                <a href="2022-03-09-ch28-debugging-templates.html">
            
                    
                    Chapter 28 Debugging Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30" data-path="2022-01-05-appB-value-categories.html">
            
                <a href="2022-01-05-appB-value-categories.html">
            
                    
                    Appendix B Value Categories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.31" data-path="2022-03-02-appC-overload-resolution.html">
            
                <a href="2022-03-02-appC-overload-resolution.html">
            
                    
                    Appendix C Overload Resolution
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Chapter 4 Variadic Templates</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="4-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;">4 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;</h1>
<h2 id="41-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;">4.1 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;</h2>
<h3 id="411-&#x4F8B;&#x5B50;">4.1.1 &#x4F8B;&#x5B50;</h3>
<pre><code class="lang-cpp"><span class="hljs-comment">// basics/varprint1.hpp</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">()</span>
</span>{
}

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Types&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">(T firstArg, Types... args)</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; firstArg &lt;&lt; <span class="hljs-string">&apos;\n&apos;</span>;  <span class="hljs-comment">// print first argument</span>
    print(args...);                 <span class="hljs-comment">// call print() for remaining arguments</span>
}
</code></pre>
<p><code>args</code>&#x79F0;&#x4E3A;<strong>&#x51FD;&#x6570;&#x53C2;&#x6570;&#x5305;&#xFF08;function parameter pack&#xFF09;</strong>&#xFF0C;<code>Types</code>&#x79F0;&#x4E3A;<strong>&#x6A21;&#x677F;&#x53C2;&#x6570;&#x5305;&#xFF08;template parameter pack&#xFF09;</strong>&#x3002;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x901A;&#x8FC7;&#x9012;&#x5F52;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x5B9E;&#x4F8B;&#x5316;&#xFF0C;&#x4F8B;&#x5982;&#x5BF9;&#x4E8E;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-built_in">std</span>::<span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">s</span><span class="hljs-params">(<span class="hljs-string">&quot;world&quot;</span>)</span></span>;
print (<span class="hljs-number">7.5</span>, <span class="hljs-string">&quot;hello&quot;</span>, s);
</code></pre>
<p>&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x4E3A;&#xFF1A;</p>
<ol>
<li><code>print (7.5, &quot;hello&quot;, s)</code>&#x5B9E;&#x4F8B;&#x5316;&#x4E3A;<code>print&lt;double, char const*, std::string&gt; (7.5, &quot;hello&quot;, s)</code>&#xFF0C;<code>firstArg</code>&#x503C;&#x4E3A;<code>7.5</code>&#xFF0C;<code>T</code>&#x4E3A;<code>double</code>&#xFF0C;<code>args</code>&#x4E2D;&#x5305;&#x542B;<code>&quot;hello&quot;</code>&#x548C;<code>s</code>&#xFF0C;<code>Types</code>&#x4E2D;&#x5305;&#x542B;<code>char const *</code>&#x548C;<code>std::string</code></li>
<li><code>print(args...)</code>&#x5B9E;&#x4F8B;&#x5316;&#x4E3A;<code>print&lt;char const*, std::string&gt; (&quot;hello&quot;, s)</code>&#xFF0C;<code>firstArg</code>&#x503C;&#x4E3A;<code>&quot;hello&quot;</code>&#xFF0C;<code>T</code>&#x4E3A;<code>char const *</code>&#xFF0C;<code>args</code>&#x4E2D;&#x5305;&#x542B;<code>s</code>&#xFF0C;<code>Types</code>&#x4E2D;&#x5305;&#x542B;<code>std::string</code></li>
<li><code>print(args...)</code>&#x5B9E;&#x4F8B;&#x5316;&#x4E3A;<code>print&lt;std::string&gt; (s)</code>&#xFF0C;<code>firstArg</code>&#x503C;&#x4E3A;<code>&quot;world&quot;</code>&#xFF0C;<code>args</code>&#x4E3A;&#x7A7A;&#xFF0C;<code>Types</code>&#x4E5F;&#x4E3A;&#x7A7A;</li>
<li>&#x8C03;&#x7528;&#x91CD;&#x8F7D;&#x51FD;&#x6570;<code>print()</code></li>
</ol>
<h3 id="412-&#x91CD;&#x8F7D;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x548C;&#x975E;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;">4.1.2 &#x91CD;&#x8F7D;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x548C;&#x975E;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;</h3>
<p>&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x91CD;&#x8F7D;&#x51FD;&#x6570;&#x6A21;&#x677F;&#x53EA;&#x6709;&#x5C3E;&#x90E8;&#x53C2;&#x6570;&#x5305;&#x4E0D;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x7F16;&#x8BD1;&#x5668;&#x4F18;&#x5148;&#x5339;&#x914D;&#x6CA1;&#x6709;&#x5C3E;&#x90E8;&#x53C2;&#x6570;&#x5305;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x6240;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// basics/varprint2.hpp</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">(T arg)</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; arg &lt;&lt; <span class="hljs-string">&apos;\n&apos;</span>; <span class="hljs-comment">// print passed argument</span>
}

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Types&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">(T firstArg, Types... args)</span>
</span>{
    print(firstArg);    <span class="hljs-comment">// call print() for the first argument</span>
    print(args...);     <span class="hljs-comment">// call print() for remaining arguments</span>
}
</code></pre>
<h3 id="413-sizeof">4.1.3 sizeof...</h3>
<p>C++11&#x5F15;&#x5165;&#x4E86;<code>sizeof...</code>&#x8FD0;&#x7B97;&#x7B26;&#xFF08;&#x6CA1;&#x9519;&#x5C31;&#x662F;&#x5305;&#x542B;&#x4E09;&#x4E2A;&#x70B9;&#xFF09;&#x6765;&#x8BA1;&#x7B97;&#x6A21;&#x677F;&#x53C2;&#x6570;&#x5305;&#x6216;&#x8005;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x5305;&#x7684;&#x5927;&#x5C0F;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Types&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">(T firstArg, Types... args)</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>...(Types) &lt;&lt; <span class="hljs-string">&apos;\n&apos;</span>;  <span class="hljs-comment">// print number of remaining types</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-keyword">sizeof</span>...(args) &lt;&lt; <span class="hljs-string">&apos;\n&apos;</span>;   <span class="hljs-comment">// print number of remaining args</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>&#x81EA;&#x7136;&#x800C;&#x7136;&#x4F1A;&#x60F3;&#x5230;&#x4F7F;&#x7528;<code>sizeof...</code>&#x6765;&#x5224;&#x65AD;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x662F;&#x5426;&#x8FD8;&#x6709;&#x53C2;&#x6570;&#x5269;&#x4F59;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x91CD;&#x8F7D;&#xFF0C;&#x4F8B;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x5F0F;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Types&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">(T firstArg, Types... args)</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; firstArg &lt;&lt; <span class="hljs-string">&apos;\n&apos;</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">sizeof</span>...(args) &gt; <span class="hljs-number">0</span>) {  <span class="hljs-comment">// error if sizeof...(args)==0</span>
        print(args...);         <span class="hljs-comment">// and no print() for no arguments declared</span>
    }
}
</code></pre>
<p>&#x4F46;&#x662F;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5B9E;&#x4F8B;&#x5316;&#x7684;<code>print()</code>&#x662F;&#x5426;&#x88AB;&#x8C03;&#x7528;&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;&#x800C;<code>sizef...</code>&#x4F1A;&#x5728;&#x7F16;&#x8BD1;&#x671F;&#x95F4;&#x6C42;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x5C3D;&#x7BA1;<code>if</code>&#x4E2D;&#x7684;&#x6761;&#x4EF6;&#x6052;&#x4E3A;&#x771F;&#x6216;&#x8005;&#x6052;&#x4E3A;&#x5047;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x8FD8;&#x662F;&#x4F1A;&#x9012;&#x5F52;&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x6240;&#x6709;&#x7684;<code>print()</code>&#xFF0C;&#x5F53;&#x627E;&#x4E0D;&#x5230;&#x65E0;&#x53C2;&#x6570;&#x7248;&#x672C;&#x7684;<code>print()</code>&#x7684;&#x5B9A;&#x4E49;&#x65F6;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#x3002;&#x539F;&#x6587;&#xFF1A;</p>
<blockquote>
<p>However, this approach doesn&#x2019;t work because in general both branches of all if statements in function templates are instantiated. Whether the instantiated code is useful is a run-time decision, while the instantiation of the call is a compile-time decision. For this reason, if you call the print() function template for one (last) argument, the statement with the call of print(args...) still is instantiated for no argument, and if there is no function print() for no arguments provided, this is an error.</p>
</blockquote>
<h2 id="42-&#x6298;&#x53E0;&#x8868;&#x8FBE;&#x5F0F;">4.2 &#x6298;&#x53E0;&#x8868;&#x8FBE;&#x5F0F;</h2>
<p>C++17&#x5F00;&#x59CB;&#x652F;&#x6301;&#x6298;&#x53E0;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5373;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8C;&#x5143;&#x8FD0;&#x7B97;&#x7B26;&#x4F5C;&#x7528;&#x4E8E;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x53C2;&#x6570;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... T&gt;
<span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">foldSum</span> <span class="hljs-params">(T... s)</span> </span>{
    <span class="hljs-keyword">return</span> (... + s); <span class="hljs-comment">// ((s1 + s2) + s3) ...</span>
}
</code></pre>
<p>&#x5982;&#x679C;&#x53C2;&#x6570;&#x5305;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x6709;&#x4F8B;&#x5916;&#xFF1A;</p>
<ol>
<li><code>&amp;&amp;</code>&#x6C42;&#x503C;&#x4E3A;<code>true</code></li>
<li><code>||</code>&#x6C42;&#x503C;&#x4E3A;<code>false</code></li>
<li><code>,</code>&#x6C42;&#x503C;&#x4E3A;<code>void()</code></li>
</ol>
<p>&#x4E0B;&#x8868;&#x5217;&#x51FA;&#x4E86;&#x652F;&#x6301;&#x7684;&#x6298;&#x53E0;&#x8868;&#x8FBE;&#x5F0F;&#x53CA;&#x76F8;&#x5E94;&#x7684;&#x5C55;&#x5F00;&#x7ED3;&#x679C;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Fold Expression</th>
<th style="text-align:left">Evaluation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">( ... op pack )</td>
<td style="text-align:left">(( pack1 op pack2 ) ... op packN )</td>
</tr>
<tr>
<td style="text-align:left">( pack op ... )</td>
<td style="text-align:left">( pack1 op ( ... ( packN-1 op packN )))</td>
</tr>
<tr>
<td style="text-align:left">( init op ... op pack )</td>
<td style="text-align:left">(( init op pack1 ) ... op packN )</td>
</tr>
<tr>
<td style="text-align:left">( pack op ... op init )</td>
<td style="text-align:left">( pack1 op ( ... ( packN op init )))</td>
</tr>
</tbody>
</table>
<p><strong>&#x8868;&#x4E2D;&#x5E26;&#x521D;&#x503C;<code>init</code>&#x7684;&#x884C;&#x7684;&#x6298;&#x53E0;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x6CA1;&#x6709;&#x7B2C;&#x4E8C;&#x4E2A;op&#xFF0C;&#x4F46;&#x662F;&#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x4E2D;&#x90FD;&#x6709;&#x4E24;&#x4E2A;op&#x3002;</strong></p>
<p>&#x7B2C;1&#x4E2A;&#x662F;&#x4F7F;&#x7528;&#x6210;&#x5458;&#x6307;&#x9488;&#x8FD0;&#x7B97;&#x7B26;<code>-&gt;*</code>&#x53D6;&#x51FA;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#x6307;&#x5B9A;&#x8282;&#x70B9;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// basics/foldtraverse.cpp</span>
<span class="hljs-comment">// define binary tree structure and traverse helpers:</span>
<span class="hljs-keyword">struct</span> Node {
    <span class="hljs-keyword">int</span> value;
    Node* left;
    Node* right;
    Node(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>) : value(i), left(<span class="hljs-literal">nullptr</span>), right(<span class="hljs-literal">nullptr</span>) {
    }
    <span class="hljs-comment">// ...</span>
};
<span class="hljs-keyword">auto</span> left = &amp;Node::left;
<span class="hljs-keyword">auto</span> right = &amp;Node::right;

<span class="hljs-comment">// traverse tree, using fold expression:</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... TP&gt;
<span class="hljs-function">Node* <span class="hljs-title">traverse</span> <span class="hljs-params">(T np, TP... paths)</span> </span>{
    <span class="hljs-keyword">return</span> (np -&gt;* ... -&gt;* paths); <span class="hljs-comment">// np -&gt;* paths1 -&gt;* paths2 ...</span>
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// init binary tree structure:</span>
    Node* root = <span class="hljs-keyword">new</span> Node{<span class="hljs-number">0</span>};
    root-&gt;left = <span class="hljs-keyword">new</span> Node{<span class="hljs-number">1</span>};
    root-&gt;left-&gt;right = <span class="hljs-keyword">new</span> Node{<span class="hljs-number">2</span>};
    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// traverse binary tree:</span>
    Node* node = traverse(root, left, right);
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>&#x7B2C;2&#x4E2A;&#x662F;&#x9012;&#x5F52;&#x6253;&#x5370;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// basics/addspace.hpp</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> AddSpace
{
    <span class="hljs-keyword">private</span>:
        T <span class="hljs-keyword">const</span>&amp; ref; <span class="hljs-comment">// refer to argument passed in constructor</span>
    <span class="hljs-keyword">public</span>:
        AddSpace(T <span class="hljs-keyword">const</span>&amp; r): ref(r) {
        }
        <span class="hljs-keyword">friend</span> <span class="hljs-built_in">std</span>::ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt; (<span class="hljs-built_in">std</span>::ostream&amp; os, AddSpace&lt;T&gt; s) {
            <span class="hljs-keyword">return</span> os &lt;&lt; s.ref &lt;&lt; <span class="hljs-string">&apos; &apos;</span>; <span class="hljs-comment">// output passed argument and a space</span>
        }
};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Args&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span> <span class="hljs-params">(Args... args)</span> </span>{
    ( <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; ... &lt;&lt; AddSpace(args) ) &lt;&lt; <span class="hljs-string">&apos;\n&apos;</span>;
}
</code></pre>
<h2 id="43-&#x5E94;&#x7528;">4.3 &#x5E94;&#x7528;</h2>
<p>&#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x4F7F;&#x7528;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<ol>
<li>&#x901A;&#x8FC7;&#x667A;&#x80FD;&#x6307;&#x9488;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4F8B;&#x5982;<code>std::make_shared&lt;std::complex&lt;float&gt;&gt;(4.2, 7.7)</code></li>
<li>&#x7EBF;&#x7A0B;&#x5E93;&#xFF0C;&#x4F8B;&#x5982;<code>std::thread t (foo, 42, &quot;hello&quot;)</code></li>
<li>&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5411;&#x5BB9;&#x5668;&#x4E2D;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF0C;&#x4F8B;&#x5982;<code>emplace_back()</code></li>
</ol>
<h2 id="44-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x7C7B;&#x6A21;&#x677F;&#x548C;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x8868;&#x8FBE;&#x5F0F;">4.4 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x7C7B;&#x6A21;&#x677F;&#x548C;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x8868;&#x8FBE;&#x5F0F;</h2>
<h3 id="441-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x8868;&#x8FBE;&#x5F0F;">4.4.1 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x8868;&#x8FBE;&#x5F0F;</h3>
<p>&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x6BCF;&#x4E2A;&#x53C2;&#x6570;&#x548C;&#x81EA;&#x8EAB;&#x76F8;&#x52A0;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... T&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printDoubled</span> <span class="hljs-params">(T <span class="hljs-keyword">const</span>&amp;... args)</span>
</span>{
    print (args + args...);
}
</code></pre>
<p><code>printDoubled(7.5, std::string(&quot;hello&quot;), std::complex&lt;float&gt;(4,2))</code>&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x7ED3;&#x679C;&#x4E3A;<code>print(7.5 + 7.5, std::string(&quot;hello&quot;) + std::string(&quot;hello&quot;), std::complex&lt;float&gt;(4,2) + std::complex&lt;float&gt;(4,2)</code>&#x3002;</p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5C06;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x6BCF;&#x4E2A;&#x53C2;&#x6570;&#x52A0;1&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... T&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addOne</span> <span class="hljs-params">(T <span class="hljs-keyword">const</span>&amp;... args)</span>
</span>{
    print (args + <span class="hljs-number">1.</span>..);    <span class="hljs-comment">// ERROR: 1... is a literal with too many decimal points</span>
    print (args + <span class="hljs-number">1</span> ...);   <span class="hljs-comment">// OK</span>
    print ((args + <span class="hljs-number">1</span>)...);  <span class="hljs-comment">// OK</span>
}
</code></pre>
<p>&#x7F16;&#x8BD1;&#x65F6;&#x88AB;&#x89E3;&#x6790;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x6A21;&#x677F;&#x53C2;&#x6570;&#x5305;&#xFF0C;&#x4F8B;&#x5982;&#x5224;&#x65AD;&#x6A21;&#x677F;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x6240;&#x6709;&#x7C7B;&#x578B;&#x662F;&#x5426;&#x76F8;&#x540C;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T1, <span class="hljs-keyword">typename</span>... TN&gt;
<span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">isHomogeneous</span> <span class="hljs-params">(T1, TN...)</span>
</span>{
    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">std</span>::is_same&lt;T1,TN&gt;::value &amp;&amp; ...); <span class="hljs-comment">// since C++17</span>
}
</code></pre>
<p><code>isHomogeneous(43, -1, &quot;hello&quot;)</code>&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x7ED3;&#x679C;&#x4E3A;<code>std::is_same&lt;int,int&gt;::value &amp;&amp; std::is_same&lt;int,char const*&gt;::value</code>&#x3002;</p>
<h3 id="442-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x548C;&#x4E0B;&#x6807;&#x8FD0;&#x7B97;&#x7B26;">4.4.2 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x548C;&#x4E0B;&#x6807;&#x8FD0;&#x7B97;&#x7B26;</h3>
<p>&#x4E0B;&#x6807;&#x8FD0;&#x7B97;&#x7B26;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x4E8E;&#x51FD;&#x6570;&#x53C2;&#x6570;&#x5305;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> C, <span class="hljs-keyword">typename</span>... Idx&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printElems</span> <span class="hljs-params">(C <span class="hljs-keyword">const</span>&amp; coll, Idx... idx)</span>
</span>{
    print (coll[idx]...);
}

<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; coll = {<span class="hljs-string">&quot;good&quot;</span>, <span class="hljs-string">&quot;times&quot;</span>, <span class="hljs-string">&quot;say&quot;</span>, <span class="hljs-string">&quot;bye&quot;</span>};
printElems(coll,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>); <span class="hljs-comment">// same effect to call print (coll[2], coll[0], coll[3])</span>
</code></pre>
<p>&#x975E;&#x7C7B;&#x578B;&#x6A21;&#x677F;&#x53C2;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x53EF;&#x53D8;&#x7684;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>... Idx, <span class="hljs-keyword">typename</span> C&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printIdx</span> <span class="hljs-params">(C <span class="hljs-keyword">const</span>&amp; coll)</span>
</span>{
    print(coll[Idx]...);
}

<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; coll = {<span class="hljs-string">&quot;good&quot;</span>, <span class="hljs-string">&quot;times&quot;</span>, <span class="hljs-string">&quot;say&quot;</span>, <span class="hljs-string">&quot;bye&quot;</span>};
printIdx&lt;<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>&gt;(coll);
</code></pre>
<h3 id="443-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x7C7B;&#x6A21;&#x677F;">4.4.3 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x7C7B;&#x6A21;&#x677F;</h3>
<p><code>std::get</code>&#x662F;&#x7F16;&#x8BD1;&#x65F6;&#x6C42;&#x503C;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x5408;&#x6CD5;&#x7684;&#xFF08;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E0D;&#x592A;&#x597D;&#x89E3;&#x91CA;&#xFF0C;&#x610F;&#x4F1A;&#x4E00;&#x4E0B;&#xFF09;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>...&gt;
<span class="hljs-keyword">struct</span> Indices {
};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span>... Idx&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printByIdx</span><span class="hljs-params">(T t, Indices&lt;Idx...&gt;)</span>
</span>{
    print(<span class="hljs-built_in">std</span>::get&lt;Idx&gt;(t)...);
}

<span class="hljs-built_in">std</span>::<span class="hljs-built_in">array</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>, 5&gt; arr = {<span class="hljs-string">&quot;Hello&quot;</span>, <span class="hljs-string">&quot;my&quot;</span>, <span class="hljs-string">&quot;new&quot;</span>, <span class="hljs-string">&quot;!&quot;</span>, <span class="hljs-string">&quot;World&quot;</span>};
printByIdx(arr, Indices&lt;<span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>&gt;());

<span class="hljs-keyword">auto</span> t = <span class="hljs-built_in">std</span>::make_tuple(<span class="hljs-number">12</span>, <span class="hljs-string">&quot;monkeys&quot;</span>, <span class="hljs-number">2.0</span>);
printByIdx(t, Indices&lt;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&gt;());
</code></pre>
<h3 id="444-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x63A8;&#x5BFC;&#x6307;&#x5F15;">4.4.4 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x63A8;&#x5BFC;&#x6307;&#x5F15;</h3>
<p>C++&#x6807;&#x51C6;&#x5E93;&#x8BBE;&#x7F6E;&#x4E86;&#x5982;&#x4E0B;&#x7684;&#x63A8;&#x5BFC;&#x6307;&#x5F15;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span> {
    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... U&gt; <span class="hljs-built_in">array</span>(T, U...)
        -&gt; <span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">enable_if_t</span>&lt;(is_same_v&lt;T, U&gt; &amp;&amp; ...), T&gt;,(<span class="hljs-number">1</span> + <span class="hljs-keyword">sizeof</span>...(U))&gt;;
}
</code></pre>
<p>&#x6839;&#x636E;&#x63A8;&#x5BFC;&#x6307;&#x5F15;&#xFF0C;&#x5BF9;&#x4E8E;&#x6570;&#x7EC4;&#x5B9A;&#x4E49;<code>std::array a{42,45,77}</code>&#xFF0C;<code>enable_if_t&lt;(is_same_v&lt;T, U&gt; &amp;&amp; ...), T&gt;</code>&#x4F1A;&#x88AB;&#x5C55;&#x5F00;&#x4E3A;<code>is_same_v&lt;T, U1&gt; &amp;&amp; is_same_v&lt;T, U2&gt; &amp;&amp; is_same_v&lt;T, U3&gt;</code>&#xFF0C;&#x5982;&#x679C;<code>U1</code>&#x3001;<code>U2</code>&#x548C;<code>U3</code>&#x7684;&#x7C7B;&#x578B;&#x4E0D;&#x540C;&#xFF0C;&#x63A8;&#x5BFC;&#x5C31;&#x4F1A;&#x5931;&#x8D25;&#xFF0C;&#x6807;&#x51C6;&#x5E93;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x4FDD;&#x8BC1;<code>std::array</code>&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x5177;&#x6709;&#x540C;&#x4E00;&#x7C7B;&#x578B;&#x3002;</p>
<h3 id="445-&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x57FA;&#x7C7B;&#x548C;using&#x58F0;&#x660E;">4.4.5 &#x53EF;&#x53D8;&#x53C2;&#x6570;&#x57FA;&#x7C7B;&#x548C;using&#x58F0;&#x660E;</h3>
<p>&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x591A;&#x91CD;&#x7EE7;&#x627F;&#xFF1A;</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// basics/varusing.cpp</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_set&gt;</span></span>

<span class="hljs-keyword">class</span> Customer
{
    <span class="hljs-keyword">private</span>:
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> name;
    <span class="hljs-keyword">public</span>:
        Customer(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> <span class="hljs-keyword">const</span>&amp; n) : name(n) { }
        <span class="hljs-built_in">std</span>::<span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{ <span class="hljs-keyword">return</span> name; }
};

<span class="hljs-keyword">struct</span> CustomerEq {
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span> <span class="hljs-params">(Customer <span class="hljs-keyword">const</span>&amp; c1, Customer <span class="hljs-keyword">const</span>&amp; c2)</span> <span class="hljs-keyword">const</span> </span>{
        <span class="hljs-keyword">return</span> c1.getName() == c2.getName();
    }
};

<span class="hljs-keyword">struct</span> CustomerHash {
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> <span class="hljs-keyword">operator</span>() (Customer <span class="hljs-keyword">const</span>&amp; c) <span class="hljs-keyword">const</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::hash&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;()(c.getName());
    }
};

<span class="hljs-comment">// define class that combines operator() for variadic base classes:</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>... Bases&gt;
<span class="hljs-keyword">struct</span> Overloader : Bases...
{
    <span class="hljs-keyword">using</span> Bases::<span class="hljs-keyword">operator</span>()...; <span class="hljs-comment">// OK since C++17</span>
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// combine hasher and equality for customers in one type:</span>
    <span class="hljs-keyword">using</span> CustomerOP = Overloader&lt;CustomerHash,CustomerEq&gt;;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_set</span>&lt;Customer,CustomerHash,CustomerEq&gt; coll1;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_set</span>&lt;Customer,CustomerOP,CustomerOP&gt; coll2;
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><code>Overloader</code>&#x901A;&#x8FC7;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x5B9E;&#x73B0;&#x4E86;&#x591A;&#x91CD;&#x7EE7;&#x627F;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;<code>using Bases::operator()...</code>&#x5F15;&#x5165;&#x4E86;&#x5404;&#x4E2A;&#x57FA;&#x7C7B;&#x4E2D;&#x7684;&#x8C03;&#x7528;&#x8FD0;&#x7B97;&#x7B26;<code>()</code>&#x3002;</p>
<h2 id="45-&#x603B;&#x7ED3;">4.5 &#x603B;&#x7ED3;</h2>
<ol>
<li>&#x53C2;&#x6570;&#x5305;&#x53EF;&#x4EE5;&#x8BA9;&#x6A21;&#x677F;&#x5904;&#x7406;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x53C2;&#x6570;</li>
<li>&#x7F16;&#x8BD1;&#x5668;&#x901A;&#x8FC7;&#x9012;&#x5F52;&#x7684;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#x53C2;&#x6570;&#x5305;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4E0D;&#x542B;&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x7684;&#x6A21;&#x677F;&#x4F5C;&#x4E3A;&#x9012;&#x5F52;&#x7EC8;&#x6B62;&#x6761;&#x4EF6;</li>
<li><code>sizeof...</code>&#x8FD0;&#x7B97;&#x7B26;&#x53EF;&#x4EE5;&#x6C42;&#x51FA;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x53C2;&#x6570;&#x6570;&#x91CF;</li>
<li>&#x53EF;&#x53D8;&#x53C2;&#x6570;&#x6A21;&#x677F;&#x7684;&#x5178;&#x578B;&#x5E94;&#x7528;&#x662F;&#x8F6C;&#x53D1;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x548C;&#x7C7B;&#x578B;&#x7684;&#x53C2;&#x6570;</li>
<li>&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6298;&#x53E0;&#x8868;&#x8FBE;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x67D0;&#x79CD;&#x64CD;&#x4F5C;&#x5E94;&#x7528;&#x4E8E;&#x53C2;&#x6570;&#x5305;&#x4E2D;&#x6240;&#x6709;&#x53C2;&#x6570;</li>
</ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="2021-12-20-ch3-nontype-template-parameters.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 3 Nontype Template Parameters">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="2021-12-30-ch5-tricky-basics.html" class="navigation navigation-next " aria-label="Next page: Chapter 5 Tricky Basics">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chapter 4 Variadic Templates","level":"1.5","depth":1,"next":{"title":"Chapter 5 Tricky Basics","level":"1.6","depth":1,"path":"2021-12-30-ch5-tricky-basics.md","ref":"2021-12-30-ch5-tricky-basics.md","articles":[]},"previous":{"title":"Chapter 3 Nontype Template Parameters","level":"1.4","depth":1,"path":"2021-12-20-ch3-nontype-template-parameters.md","ref":"2021-12-20-ch3-nontype-template-parameters.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"2021-12-20-ch4-variadic-templates.md","mtime":"2022-11-13T05:00:16.159Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-11-13T05:01:04.198Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

